<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lovable Dashboard Credit Widget Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 min-h-screen p-8">
    <div class="max-w-md mx-auto">
        <!-- Credit Widget -->
        <div class="bg-gray-800 text-white p-10 font-sans"> 
            <div class="flex flex-col gap-2.5 rounded-xl bg-muted p-4 md:rounded-md md:p-3" style="background-color: #333; width: 300px;">
                <div class="flex items-center justify-between cursor-pointer transition-all duration-150 ease-in-out hover:opacity-80">
                    <p class="text-base font-medium text-foreground md:text-sm" style="color: #fff;">Credits</p>
                    <div class="flex items-center gap-px">
                        <p id="credit-display" class="text-base font-normal md:text-sm text-muted-foreground" style="color: #aaa;">50 left</p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 -960 960 960" class="shrink-0 h-4 w-4 text-muted-foreground" fill="currentColor" style="color: #aaa;">
                            <path d="M530-481 353-658q-9-9-8.5-21t9.5-21 21.5-9 21 9 9 21v198q5 7 10t2 11-2 11l396-261q-9 9-21 8.5t-21-9.5-21.5-9-21.5-9.5-21.5-9.5z"></path>
                        </svg>
                    </div>
                </div>
                <div class="w-full bg-gray-600 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-300" style="width: 100%"></div>
                </div>
                <p class="text-xs text-muted-foreground" style="color: #aaa;">Daily credits used first</p>
            </div>
        </div>

        <!-- Interactive Controls -->
        <div class="mt-8 space-y-4">
            <div class="flex gap-4">
                <button id="deplete-1" class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded transition-colors duration-200">
                    Deplete 1 Credit
                </button>
                <button id="deplete-5" class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded transition-colors duration-200">
                    Deplete 5 Credits
                </button>
            </div>
            <button id="reset-credits" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded transition-colors duration-200">
                Reset Credits
            </button>
        </div>

        <!-- Status Display -->
        <div class="mt-6 p-4 bg-gray-800 rounded-lg">
            <p class="text-white text-sm">Current Credits: <span id="current-credits">50</span></p>
            <p class="text-gray-400 text-xs mt-1">Progress: <span id="progress-percentage">100</span>%</p>
        </div>
    </div>

    <script>
        // Credit management system
        let currentCredits = 50;
        const maxCredits = 50;
        
        // Get DOM elements
        const creditDisplay = document.getElementById('credit-display');
        const progressBar = document.getElementById('progress-bar');
        const currentCreditsSpan = document.getElementById('current-credits');
        const progressPercentageSpan = document.getElementById('progress-percentage');
        
        // Update display function
        function updateDisplay() {
            // Update the credit display text
            creditDisplay.textContent = `${currentCredits} left`;
            
            // Update progress bar
            const percentage = Math.max(0, (currentCredits / maxCredits) * 100);
            progressBar.style.width = `${percentage}%`;
            
            // Update status display
            currentCreditsSpan.textContent = currentCredits;
            progressPercentageSpan.textContent = Math.round(percentage);
            
            // Change progress bar color based on credit level
            if (percentage <= 20) {
                progressBar.className = 'bg-red-600 h-2.5 rounded-full transition-all duration-300';
            } else if (percentage <= 50) {
                progressBar.className = 'bg-yellow-600 h-2.5 rounded-full transition-all duration-300';
            } else {
                progressBar.className = 'bg-blue-600 h-2.5 rounded-full transition-all duration-300';
            }
            
            // Debug: Log credit changes for extension testing
            console.log(`Credit changed to: ${currentCredits}`);
        }
        
        // Deplete credits function
        function depleteCredits(amount) {
            currentCredits = Math.max(0, currentCredits - amount);
            updateDisplay();
        }
        
        // Reset credits function
        function resetCredits() {
            currentCredits = maxCredits;
            updateDisplay();
        }
        
        // Auto-deplete function for testing
        function autoDeplete() {
            if (currentCredits > 0) {
                depleteCredits(1);
                // Schedule next depletion in 2 seconds
                setTimeout(autoDeplete, 2000);
            }
        }
        
        // Event listeners
        document.getElementById('deplete-1').addEventListener('click', () => {
            depleteCredits(1);
        });
        
        document.getElementById('deplete-5').addEventListener('click', () => {
            depleteCredits(5);
        });
        
        document.getElementById('reset-credits').addEventListener('click', () => {
            resetCredits();
        });
        
        // Add auto-deplete button for testing
        const autoButton = document.createElement('button');
        autoButton.id = 'auto-deplete';
        autoButton.className = 'bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded transition-colors duration-200';
        autoButton.textContent = 'Auto Deplete (Test)';
        autoButton.addEventListener('click', () => {
            if (currentCredits > 0) {
                autoDeplete();
            }
        });
        document.querySelector('.flex.gap-4').appendChild(autoButton);
        
        // Initialize display
        updateDisplay();
        
        // Simulate initial credit usage for better testing
        setTimeout(() => {
            depleteCredits(2);
        }, 1000);
        
        setTimeout(() => {
            depleteCredits(3);
        }, 3000);
    </script>
</body>
</html> 